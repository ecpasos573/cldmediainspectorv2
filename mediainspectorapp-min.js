class ClsMediaInspectorTool{#e="0.1.0";#t=[];#n=[];constructor(){this.init()}init(){}addMediaSrc(e){this.#t.push(e),this.addMediaRowData(e)}getThumbnail(e){var t=`<img src=${e.MediaPerf.name} style="width:300px">`,n=parseInt(e.MediaRespHdr["content-length"])>0?t:'<img src="https://defaultplaceholder.png" width=100 height=100 />',i="<div>",a=e.MediaRespHdr["content-type"].split("/")[1],s=e.MediaRespHdr["content-type"]||"";return void 0!==s&&(s.match(/^image\//i)?i+=n:s.match(/^video\//i)?i+=`\n    <video width="300" controls>\n      <source src="${e.MediaPerf.name}" type="${e.MediaRespHdr["content-type"]}">\n      Your browser does not support the video tag.\n    </video>`:s.match(/javascript/i)?i+='\n    <span style="display: table;margin: 0 auto;color:lightgray;font-weight:bold;width: 60px;height: 50px;text-align: center;font-family: sans-serif;border-radius: 5px 5px 5px; border: 1px solid lightgray;float:left;">{ . . . }   JS</span>':i+=`\n    <span style="display: table;margin: 0 auto;color:lightgray;font-weight:bold;width: 60px;height: 50px;text-align: center;font-family: sans-serif;border-radius: 5px 5px 5px; border: 1px solid lightgray;float:left;">{ - }   ${a.toUpperCase()}</span>`),i+="</div>"}getUrl(e){var t="";return void 0!==(e.MediaRespHdr["content-type"]||"")&&(t+=`<a style="word-wrap: break-word;" href=${e.MediaPerf.name} target="_blank" >${e.MediaPerf.name}</a>`),t}getEntitiesCount(e){return"1","1"}getService(e){var t="";return t+='<span style="word-wrap: break-word;">',t+=null!=e.MediaRespHdr.server?e.MediaRespHdr.server:e.MediaRespHdr.hostname,t+="</span>"}getLastServer(e){var t=this.getService(e);try{if(null!==e.MediaRespHdr["server-timing"]){for(var n=e.MediaRespHdr["server-timing"].split(","),i="",a=0;a<n.length;++a)for(var s=n[a].split(";"),r=0;r<s.length;++r){var o=s[r].split("=");void 0===o[1]?i.length>1?i+=`@Name: ${o[0]}, `:i+=`Name: ${o[0]}, `:i+=` ${o[0]}: ${o[1]},`}for(var d=(i+"}").replace(",}","").split("@"),l=0;l<d.length;++l){d[l].indexOf("cld-")>1&&(t="Cloudinary")}}}catch(e){}return t}getResponseStatus(e){var t="";return t+=parseInt(e.MediaPerf.responseStatus)<1&&parseInt(e.MediaRespHdr["content-length"])<1?"404":(parseInt(e.MediaPerf.responseStatus)||200).toString()}getErrorMessage(e){var t="";return t+='<span style="word-wrap: break-word;">',t+=e.MediaRespHdr["error-message"],t+="</span>"}getContentLength(e){var t="",n=parseInt(e.MediaRespHdr["content-length"])<1?"0 B":parseInt(e.MediaRespHdr["content-length"]);return t+=isNaN(n)?"0 B":n+" B"}getScaleRatio(e){var t="",n="No image to display";if(e.MediaRespHdr["content-type"]?.match(/image|video/))if(void 0===e.MediaDoc||0===e.MediaDoc.naturalWidth||0===e.MediaDoc.naturalHeight);else if(e.MediaRespHdr["content-type"]?.match(/image/))n=(e.MediaDoc.naturalWidth/e.MediaDoc.clientWidth).toFixed(2)+":"+(e.MediaDoc.naturalHeight/e.MediaDoc.clientHeight).toFixed(2);else if(e.MediaRespHdr["content-type"]?.match(/video/)){n=(e.MediaDoc.videoWidth/e.MediaDoc.clientWidth).toFixed(2)+":"+(e.MediaDoc.videoHeight/e.MediaDoc.clientHeight).toFixed(2)}return t+=n}getContentType(e){var t="";let n="";if(""!==e.MediaRespHdr["content-type"]){var i=e.MediaRespHdr["content-type"].split("/"),a=i[0];a=a.charAt(0).toUpperCase()+a.substring(1);var s=i[1].split(";")[0];n=a+" "+("JAVASCRIPT"===(s=s.toUpperCase())?"JS":s)}return t+=n}getContentLength(e){var t="",n=parseInt(e.MediaRespHdr["content-length"]);if(isNaN(n))return"0 B";for(var i=0;n>=1024;)n/=1024,++i;return t+=(0==i?n:n.toFixed(2))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}getTtfb(e){var t="",n=void 0===e.MediaPerf?-1:e.MediaPerf.responseStart-e.MediaPerf.requestStart;return t+=n<0?"N/A":n.toFixed(2)+" ms"}getContentDlTime(e){var t="",n=void 0===e.MediaPerf?-1:e.MediaPerf.responseEnd-e.MediaPerf.responseStart;return t+=n<0?"N/A":n.toFixed(2)+" ms"}getEtag(e){return e.MediaRespHdr.etag}getOriginalDimensions(e){var t="",n=0,i=0;return"IMG"==e.MediaDoc.nodeName.toUpperCase()?(n=e.MediaDoc.naturalWidth,i=e.MediaDoc.naturalHeight):"VIDEO"==e.MediaDoc.nodeName.toUpperCase()&&(n=e.MediaDoc.videoWidth,i=e.MediaDoc.videoHeight),n>0&&i>0&&(t+=n+" x "+i+"px",t+=" | Aspect Ratio - "+this.getAspectRatio(n/i,50).toString().replace(",",":")),t}getDisplayDimension(e){var t="",n=0,i=0;return"IMG"==e.MediaDoc.nodeName.toUpperCase()?(n=e.MediaDoc.naturalWidth,i=e.MediaDoc.naturalHeight):"VIDEO"==e.MediaDoc.nodeName.toUpperCase()&&(n=e.MediaDoc.videoWidth,i=e.MediaDoc.videoHeight),n>0&&i>0&&(t+=e.MediaDoc.clientWidth+" x "+e.MediaDoc.clientHeight+"px",t+=" | Aspect Ratio - "+this.getAspectRatio(e.MediaDoc.clientWidth/e.MediaDoc.clientHeight,50).toString().replace(",",":"),t+=" | Scale Ratio: "+(n/e.MediaDoc.clientWidth).toFixed(2)+": "+(i/e.MediaDoc.clientHeight).toFixed(2),t+=" | DPR: "+e.MediaRespHdr.dpr),t}getAspectRatio(e,t){for(var n=[0,1],i=[1,0];;){var a=[n[0]+i[0],n[1]+i[1]];if(e*a[1]>a[0]){if(t<a[1])return i;n=a}else{if(e*a[1]==a[0])return t>=a[1]?a:n[1]<i[1]?n:i;if(t<a[1])return n;i=a}}}getProtocol(e){var t="",n=e.MediaRespHdr.protocol.replace(":","");return t+=("http/1.1"===e.MediaPerf.nextHopProtocol?e.MediaPerf.nextHopProtocol:e.MediaPerf.nextHopProtocol.length>0?n+"/"+e.MediaPerf.nextHopProtocol:n).toUpperCase()}getServerTiming(e){var t="";try{if(null!==e.MediaRespHdr["server-timing"]||void 0!==e.MediaRespHdr["server-timing"]){var n=!1;t='<table class="bitable">';var i=e.MediaRespHdr["server-timing"];if(("prefixtest"+i).indexOf("cld-")>1){var a,s=/(^.+?;.+?,)(.+?;.+?,)(.+"+.+?"+;|,)(.+)/g.exec(i);if(null!==s)for(var r=1;r<s.length;++r)t+=`<tr><td class="bitd bitdcolc" style="padding: 0.5rem;">${this.getBasicInfoData(s[r])}</td></tr>`,n=!0;if(!n)if(null!==(a=/(^.+?;.+?,)(.+?;.+?,)(.+"+.+?"+)/g.exec(i)))for(r=1;r<a.length;++r)t+=`<tr><td class="bitd bitdcolc" style="padding: 0.5rem;">${this.getBasicInfoData(a[r])}</td></tr>`,n=!0;if(!n)if(null!==(a=/(^.+?;.+?,)(.+?;.+)/g.exec(i)))for(r=1;r<a.length;++r)t+=`<tr><td class="bitd bitdcolc" style="padding: 0.5rem;">${this.getBasicInfoData(a[r])}</td></tr>`,n=!0;n||(t+=`<tr>\n                <td class="bitd bitdcolc" style="padding: 0.5rem;">${this.getBasicInfoData(i)}</td></tr>`)}else t+=`<tr>\n                <td class="bitd bitdcolc" style="padding: 0.5rem;">${this.getBasicInfoData(void 0===i?"Unavailable":i)}</td></tr>`;t+="</table>"}}catch(e){t='<table class="bitable">',t+='<tr><td class="bitd bitdcolc" style="padding: 0.5rem;"></td></tr>',t+="</table>"}return t}getRemoteIp(){return""}getFetchMethod(){return""}getLastModified(e){var t=e.MediaRespHdr["last-modified"];return void 0===t||""===t?"":t}getResponseDate(e){var t="";const n=new Date;return n.setTime(parseInt(e.MediaPerf.perfTiming.responseEnd)),t+=n.toUTCString()}getCacheControl(e){var t=e.MediaRespHdr["cache-control"];return void 0===t||""===t?"":t}getXContentTypeOption(e){var t=e.MediaRespHdr["x-content-type-options"];return void 0===t||""===t?"":t}getAccessControlExposeHeaders(){return""}getReqHdrsDetails(e){var t="<h5>Request Headers</h5>";return t+=`\n        <div class="table-responsive">\n            <table class="tableDetail">\n                <tbody>\n                    ${this.getDetailRow("Sec-CH-UA",e.MediaReqHdr["Sec-CH-UA"])}\n                    ${this.getDetailRow("Sec-CH-UA-Mobile",e.MediaReqHdr["Sec-CH-UA-Mobile"])}\n                    ${this.getDetailRow("Sec-CH-UA-Platform",e.MediaReqHdr["Sec-CH-UA-Platform"])}\n                    ${this.getDetailRow("User-Agent",e.MediaReqHdr["User-Agent"])}\n                    ${this.getDetailRow("Upgrade-Insecure-Requests","")}\n                    ${this.getDetailRow("Accept","")}\n                    ${this.getDetailRow("Sec-Fetch-Site","")}\n                    ${this.getDetailRow("Sec-Fetch-Mode","")}\n                    ${this.getDetailRow("Sec-Fetch-User","")}\n                    ${this.getDetailRow("Sec-Fetch-Dest","")}\n                </tbody>\n            </table>\n        </div>\n        `}getRespHdrsDetails(e){var t="<h5>Response Headers</h5>";return t+=`\n        <div class="table-responsive">\n            <table class="tableDetail">\n                <tbody>\n                    ${this.getDetailRow("Content-Type",this.getContentType(e))}\n                    ${this.getDetailRow("eTag",this.getEtag(e))}\n                    ${this.getDetailRow("Last Modified",this.getLastModified(e))}\n                    ${this.getDetailRow("Date",this.getResponseDate(e))}\n                    ${this.getDetailRow("Cache-Control",this.getCacheControl(e))}\n                    ${this.getDetailRow("Server-Timing",this.getServerTiming(e))}\n                    ${this.getDetailRow("Server",this.getLastServer(e))}\n                    ${this.getDetailRow("X-Content-Type-Options",this.getXContentTypeOption(e))}\n                    ${this.getDetailRow("Accept-Ranges",this.getContentLength(e))}\n                    ${this.getDetailRow("Access-Control-Expose-Headers","")}\n                    ${this.getDetailRow("Timing-Allow-Origin","")}\n                    ${this.getDetailRow("Access-Control-Allow-Origin","")}\n                    ${this.getDetailRow("Accept-Ranges","")}\n                </tbody>\n            </table>\n        </div>\n        `}getPerfDetails(e){var t="<h5>Performance</h5>";return t+=`\n        <div class="table-responsive">\n            <table class="tableDetail">\n                <tbody>\n                    ${this.getDetailRow("name",this.getUrl(e))}\n                    ${this.getDetailRow("entryType",e.MediaPerf.entryType)}\n                    ${this.getDetailRow("startTime",e.MediaPerf.startTime.toFixed(2)+" ms")}\n                    ${this.getDetailRow("duration",e.MediaPerf.duration.toFixed(2)+" ms")}\n                    ${this.getDetailRow("initiatorType",e.MediaPerf.initiatorType)}\n                    ${this.getDetailRow("nextHopProtocol",e.MediaPerf.nextHopProtocol)}\n                    ${this.getDetailRow("renderBlockingStatus",e.MediaPerf.renderBlockingStatus)}\n                    ${this.getDetailRow("workerStart",e.MediaPerf.workerStart)}\n                    ${this.getDetailRow("redirectStart",e.MediaPerf.perfTiming.redirectStart)}\n                    ${this.getDetailRow("redirectEnd",e.MediaPerf.perfTiming.redirectEnd)}\n                    ${this.getDetailRow("fetchStart",e.MediaPerf.perfTiming.fetchStart)}\n                    ${this.getDetailRow("domainLookupStart",e.MediaPerf.perfTiming.domainLookupStart)}\n                    ${this.getDetailRow("domainLookupEnd",e.MediaPerf.perfTiming.domainLookupEnd)}\n                    ${this.getDetailRow("connectStart",e.MediaPerf.connectStart.toFixed(2)+" ms")}\n                    ${this.getDetailRow("connectEnd",e.MediaPerf.connectEnd.toFixed(2)+" ms")}\n                    ${this.getDetailRow("secureConnectionStart",e.MediaPerf.secureConnectionStart.toFixed(2)+" ms")}\n                    ${this.getDetailRow("requestStart",e.MediaPerf.requestStart.toFixed(2)+" ms")}\n                    ${this.getDetailRow("responseStart",e.MediaPerf.responseStart.toFixed(2)+" ms")}\n                    ${this.getDetailRow("responseEnd",e.MediaPerf.responseEnd.toFixed(2)+" ms")}\n                    ${this.getDetailRow("transferSize",e.MediaPerf.transferSize)}\n                    ${this.getDetailRow("encodedBodySize",e.MediaPerf.encodedBodySize)}\n                    ${this.getDetailRow("decodedBodySize",e.MediaPerf.decodedBodySize)}\n                    ${this.getDetailRow("responseStatus",this.getResponseStatus(e))}\n                    ${this.getDetailRow("serverTiming",this.getServerTiming(e))}\n                    ${this.getDetailRow("unloadEventStart",e.MediaPerf.perfTiming.unloadEventStart)}\n                    ${this.getDetailRow("unloadEventEnd",e.MediaPerf.perfTiming.unloadEventEnd)}\n                    ${this.getDetailRow("domInteractive",e.MediaPerf.perfTiming.domInteractive)}\n                    ${this.getDetailRow("domContentLoadedEventStart",e.MediaPerf.perfTiming.domContentLoadedEventStart)}\n                    ${this.getDetailRow("domContentLoadedEventEnd",e.MediaPerf.perfTiming.domContentLoadedEventEnd)}\n                    ${this.getDetailRow("domComplete",e.MediaPerf.perfTiming.domComplete)}\n                    ${this.getDetailRow("loadEventStart",e.MediaPerf.perfTiming.loadEventStart)}\n                    ${this.getDetailRow("loadEventEnd",e.MediaPerf.perfTiming.loadEventEnd)}\n                    ${this.getDetailRow("type","")}\n                    ${this.getDetailRow("redirectCount","")}\n                    ${this.getDetailRow("activationStart","")}\n                </tbody>\n            </table>\n        </div>\n        `}getBasicInfoData(e){return`<div style="width: 300px;padding-left: 5px;">${e}</div>`}getBasicInformation(e){return`\n            <hr/>\n            <table class="bitable">\n              \x3c!--\n              <tr>\n                <th class="bith bithcola" style="padding: 0.5rem;">Item</th>\n                <th class="bith bithcolb" style="padding: 0.5rem;">Value</th>\n    \n                <th class="bith bithcola" style="padding: 0.5rem;">Item</th>\n                <th class="bith" style="padding: 0.5rem;">Value</th>\n              </tr>\n              --\x3e\n              <tr>\n                <td class="bitd bitdcola" style="padding: 0.5rem;">URL</td>\n                <td class="bitd bitdcolb" style="padding: 0.5rem;">${this.getBasicInfoData(this.getUrl(e))}</td>\n    \n                <td class="bitd bitdcola" style="padding: 0.5rem;">Service</td>\n                <td class="bitd bitdcolb" style="padding: 0.5rem;">${this.getBasicInfoData(this.getLastServer(e))}</td>\n              </tr>\n              <tr>\n                <td class="bitd" style="padding: 0.5rem;">Status</td>\n                <td class="bitd" style="padding: 0.5rem;">${this.getBasicInfoData(this.getResponseStatus(e))}</td>\n    \n                <td class="bitd" style="padding: 0.5rem;">eTag</td>\n                <td class="bitd" style="padding: 0.5rem;">${this.getBasicInfoData(this.getEtag(e))}</td>\n              </tr>\n              <tr>\n                <td class="bitd" style="padding: 0.5rem;">Original Dimension</td>\n                <td class="bitd" style="padding: 0.5rem;">${this.getBasicInfoData(this.getOriginalDimensions(e))}</td>\n    \n                <td class="bitd" style="padding: 0.5rem;">Display Dimension</td>\n                <td class="bitd" style="padding: 0.5rem;">${this.getBasicInfoData(this.getDisplayDimension(e))}</td>\n              </tr>\n              <tr>\n                <td class="bitd" style="padding: 0.5rem;">Content Type</td>\n                <td class="bitd" style="padding: 0.5rem;">${this.getBasicInfoData(this.getContentType(e))}</td>\n    \n                <td class="bitd" style="padding: 0.5rem;">Content Length</td>\n                <td class="bitd" style="padding: 0.5rem;">${this.getBasicInfoData(this.getContentLength(e))}</td>\n              </tr>\n              <tr>\n                <td class="bitd" style="padding: 0.5rem;">TTFB</td>\n                <td class="bitd" style="padding: 0.5rem;">${this.getBasicInfoData(this.getTtfb(e))}</td>\n    \n                <td class="bitd" style="padding: 0.5rem;">Content Download</td>\n                <td class="bitd" style="padding: 0.5rem;">${this.getBasicInfoData(this.getContentDlTime(e))}</td>\n              </tr>\n          </table>\n        `}getDetails(e,t){var n=`<button id="viewdetail${t}" class="collapsible btnactive${t}" style="width: 180px;">View</button>`;return n+=`<div class="mediadetail">\n                    ${this.getDetailsPane(e,t)}\n                  </div>\n                  <div class="basicinfo basicinfo${t}">\n                    ${this.getBasicInformation(e)}\n                  </div>\n                  `}getDetailRow(e,t){return`\n            <tr>\n                <td class="paramlabel" style="padding: 0.5rem;"><span style="word-wrap: break-word;">${e}</span></td>\n                <td class="paramdesc" style="padding: 0.5rem;"><div style="width: 450px;padding-left: 5px;"><span style="word-wrap: break-word;">${t}</span></div></td>\n            </tr>\n            `}getSummaryDetails(e){var t="<h5>Summary</h5>";return t+=`\n                <div class="table-responsive">\n                    <table class="tableDetail">\n                        <tbody>\n                            ${this.getDetailRow("URL",this.getUrl(e))}\n                            ${this.getDetailRow("HTTP Status",this.getProtocol(e)+"  "+this.getResponseStatus(e)+"\n"+this.getErrorMessage(e))}\n                            ${this.getDetailRow("Original Dimensions",this.getOriginalDimensions(e))}\n                            ${this.getDetailRow("Display Dimensions",this.getDisplayDimension(e))}\n                            ${this.getDetailRow("Service",this.getLastServer(e))}\n                            ${this.getDetailRow("Content-Type",this.getContentType(e))}\n                            ${this.getDetailRow("Content-Length",this.getContentLength(e))}\n                            ${this.getDetailRow("Server-Timing",this.getServerTiming(e))}\n                            ${this.getDetailRow("eTag",this.getEtag(e))}\n                            ${this.getDetailRow("TTFB",this.getTtfb(e))}\n                            ${this.getDetailRow("Content Download",this.getContentDlTime(e))}\n                            ${this.getDetailRow("Remote IP",this.getRemoteIp(e))}\n                            ${this.getDetailRow("Method",this.getFetchMethod(e))}\n                        </tbody>\n                    </table>\n                </div>\n                `}getDetailsPane(e,t){return`\n          <div class="tab tab${t}"> \n            <button class="tablinks tablinks${t}" onclick="showMediaDetails(${t}, event, 'Summary')" id="defaultOpen${t}">Summary</button> \n            <button class="tablinks tablinks${t}" onclick="showMediaDetails(${t}, event, 'ResponseHeaders')">Response Headers</button> \n            <button class="tablinks tablinks${t}" onclick="showMediaDetails(${t}, event, 'RequestHeaders')">Request Headers</button> \n            <button class="tablinks tablinks${t}" onclick="showMediaDetails(${t}, event, 'Performance')">Performance</button> \n            <button class="tablinks tablinks${t}" onclick="showMediaDetails(${t}, event, 'Transformation')">Transformation</button>\n            <button class="tablinks tablinks${t}" onclick="showMediaDetails(${t}, event, 'Utilities')">Utilities</button> \n          </div>\n    \n          <div id="Summary${t}" class="tabcontent tabcontent${t}"> ${this.getSummaryDetails(e)} </div>\n          <div id="ResponseHeaders${t}" class="tabcontent tabcontent${t}"> ${this.getRespHdrsDetails(e)} </div>\n          <div id="RequestHeaders${t}" class="tabcontent tabcontent${t}"> ${this.getReqHdrsDetails(e)} </div>\n          <div id="Performance${t}" class="tabcontent tabcontent${t} detailPane"> ${this.getPerfDetails(e)} </div>\n          <div id="Transformation${t}" class="tabcontent tabcontent${t}">\n            <h5>Transformation</h5>\n            <p>Transformation - under construction... ${t}.</p>\n          </div>\n          <div id="Utilities${t}" class="tabcontent tabcontent${t}">\n            <h5>Utilities</h5>\n            <p>Utilities - under construction... ${t}.</p>\n          </div>\n        `}addMediaRowData(e){var t=[];t.push({style:'style="font-size: 14px;"',value:(this.#n.length+1).toString()}),t.push({style:"",value:this.getThumbnail(e)}),t.push({style:'style="font-size: 14px;"',value:this.getDetails(e,this.#n.length)}),this.#n.push(t)}getTimestamp(){return(new Date).toISOString().replace(/-/g,"").replace(/:/g,"").replace(/\./,"")}createReportPage(e,t,n){const i=`<!DOCTYPE html>\n    <html>\n    <head>\n      <title>Cld Media Analyzer</title>\n      <meta charset="utf-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1">\n      <link rel="stylesheet" type="text/css"\n          href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css" />\n      <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap4.min.css" />\n      <script src="https://code.jquery.com/jquery-3.5.1.js"><\/script>\n      <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"><\/script>\n      <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap4.min.js"><\/script>\n      <style>\n    \n        .radial-gradient {\n    \n          background-repeat:no-repeat;\n    \n          background-size: 100% 100%;\n          background-image: radial-gradient(farthest-corner at 40px 40px,\n            #ffffff 40%, #fffffff 100%,#ddd 100%);\n        }\n        .collapsible {\n          background-color: #777;\n          color: white;\n          cursor: pointer;\n          border: none;\n          font-size: 15px;\n          width: 100%;\n        }\n    \n        .active, .collapsible:hover {\n          background-color: #555;\n        }  \n    \n        .collapsible:after {\n          //content: '+';\n          color: white;\n          font-weight: bold;\n          float: right;\n          margin-left: 5px;\n        }\n    \n        .mediadetail {\n          max-height: 0;\n          overflow: hidden;\n          transition: max-height 0.2s ease-out;\n        }\n    \n        /* ********** Style the tab */\n        .tab {\n          float: left;\n          border: 1px solid #ccc;\n          background-color: #f1f1f1;\n          width: 180px;\n          height: 780px;\n        }\n        \n        /* Style the buttons inside the tab */\n        .tab button {\n          display: block;\n          background-color: inherit;\n          color: black;\n          padding: 7px 5px;\n          width: 100%;\n          border: none;\n          outline: none;\n          text-align: left;\n          cursor: pointer;\n          transition: 0.3s;\n          font-size: 15px;\n        }\n        \n        /* Change background color of buttons on hover */\n        .tab button:hover {\n          background-color: #ddd;\n        }\n        \n        /* Create an active/current "tab button" class */\n        .tab button.active {\n          background-color: #ccc;\n        }\n        \n        /* Style the tab content */\n        .tabcontent {\n          float: left;\n          padding: 0px 12px;\n          border: 1px solid #ccc;\n          width: 70%;\n          border-left: none;\n          height: 780px;\n        }\n    \n        table .bitable {\n          border-collapse: collapse;\n        }\n    \n        table .bith, .bitd {\n          padding: 0.5rem;\n          text-align: left;\n          border-bottom: 1px solid #ddd;\n        }\n    \n        table .bithcola, .bitdcola {\n          width: 80px;\n        }\n    \n        table .bithcolb, .bitdcolb {\n          width: 400px;\n        }\n\n        table .bithcolc, .bitdcolc {\n            width: 100px;\n        }\n        \n        table .bithcold, .bitdcold {\n            width: 100px;\n        }\n\n        .detailPane{\n            overflow:scroll;\n        }\n        \n\n      </style>\n    </head>\n    <body class="radial-gradient">\n        <div class="mycontainer" style="padding-left: 20px;padding-right: 20px;padding-bottom: 50px;">\n          <h2>CLD Media Analyzer</h2>\n          <p>The list of images from the current page that are being analyzed.</p>  \n          <table id="example" class="table table-striped table-bordered" style="width:100%">\n              ${e}\n              ${t}\n              ${n}\n          </table>\n          <script>\n              $(document).ready(function () {\n                  $('#example').DataTable();\n              });\n          <\/script>\n        </div>\n        <script>\n          var coll = document.getElementsByClassName("collapsible");\n          var i;\n          for (i = 0; i < coll.length; i++) {\n            coll[i].addEventListener("click", function() {\n              this.classList.toggle("active");\n              var content = this.nextElementSibling;\n              if (content.style.maxHeight){\n                content.style.maxHeight = null;\n              } else {\n                content.style.maxHeight = content.scrollHeight + "px";\n              }\n            });\n          }\n        <\/script>\n    \n        <script>\n          function showMediaDetails(tabClsIndex, evt, mediaDetail) {\n            var i, tabcontent, tablinks;\n            tabcontent = document.getElementsByClassName("tabcontent" + tabClsIndex.toString());\n            for (i = 0; i < tabcontent.length; i++) {\n              tabcontent[i].style.display = "none";\n            }\n            tablinks = document.getElementsByClassName(\n              "tablinks" + tabClsIndex.toString()\n            );\n            for (i = 0; i < tablinks.length; i++) {\n              tablinks[i].className = tablinks[i].className.replace(" active", "");\n            }\n            document.getElementById(mediaDetail + tabClsIndex.toString()).style.display = "block";\n            evt.currentTarget.className += " active";\n          }\n          \n          var x = 0;\n          \n          var rowItems = document.getElementsByClassName("collapsible");\n          \n          for (x = 0; x < rowItems.length; x++) {\n            document.getElementById("defaultOpen" + x.toString()).click();\n          }\n        <\/script>\n          \n    </body>\n    </html>\n          `,a=URL.createObjectURL(new Blob([i],{type:"text/html"}));this.getTimestamp(),window.open(a,"win"+this.getTimestamp(),"width=1500,height=800,screenX=100,screenY=100")}show(){var e=new ClsMITTable;e.addHeaderFooter("Item",'style="width: 50px"'),e.addHeaderFooter("Thumb",'style="width: 300px"'),e.addHeaderFooter("Service"),this.#n.forEach((t=>{e.addRow(t)})),this.createReportPage(e.setHeader(),e.setRow(),e.setFooter())}}class ClsMediaSource{#i;#a;#s;constructor(){}set MediaPerf(e){this.#i=e}get MediaPerf(){return this.#i}set MediaDoc(e){this.#a=e}get MediaDoc(){return this.#a}set MediaRespHdr(e){this.#s=e}get MediaRespHdr(){return this.#s}}class ClsMITTable{#r=0;#o=0;#d=0;#l=0;#c=[];#h=[];#g=[];constructor(){}addRow(e){var t="<tr>\n";e.forEach((e=>{t+=`<td ${e.style}>${e.value}</td>\n`})),t+="</tr>",this.#c.push(t),this.setRow(),this.#r++}addCol(e){this.#o++}addHeaderFooter(e){this.addHeader(e),this.addFooter(e)}addHeaderFooter(e,t){this.addHeader(e,t),this.addFooter(e,t)}addHeader(e){this.#h.push(`<th>${e}</th>`),this.setHeader(),this.#d++}addHeader(e,t){this.#h.push(`<th ${t}>${e}</th>`),this.setHeader(),this.#d++}addHeader(e,t,n){this.#h.push(`<th ${n} ${t}>${e}</th>`),this.setHeader(),this.#d++}addFooter(e){this.#g.push(`<th>${e}</th>`),this.setFooter(),this.#l++}addFooter(e,t){this.#g.push(`<th ${t}>${e}</th>`),this.setFooter(),this.#l++}setRow(){var e="<tbody>\n";return this.#c.forEach((t=>{e+=t+"\n"})),e+="</tbody>\n"}setHeader(){var e='<thead>\n<tr role="row">\n';return this.#h.forEach((t=>{e+=t+"\n"})),e+="</tr>\n</thead>"}setFooter(){var e="<tfoot>\n<tr>\n";return this.#h.forEach((t=>{e+=t+"\n"})),e+="</tr>\n</tfoot>"}}function appGetRespHeader(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1),t.setRequestHeader("Access-Control-Allow-Origin","*"),t.onreadystatechange=function(n){if(4===t.readyState){var i=JSON.parse(JSON.stringify(t.getAllResponseHeaders())).split("\r\n");200===t.status?(i.push("noresna: NA"),i.push("Status: All Good")):(JSON.stringify(t.getAllResponseHeaders()).toString().search(/x-cld-error/i)<0&&i.push("noreserr: Resource not found"),i.push("Status: Still working on it!!!"));try{var a=new URL(e);i.push("hostname: "+a.hostname)}catch(e){i.push("hostname:","undefined")}var s={};return i.forEach((e=>{if(""!=e){var t=e.toString().split(":")[0].trim(),n=e.toString().replace(t+":","").trim();s[t]=n,"x-cld-error"===t?s["error-message"]=e:"noreserr"===t?s["error-message"]="Resource not found":"noresna"===t&&(s["error-message"]="NA")}})),s}},t.send(null)}class ClsMediaInspectorUtil{constructor(){}getBrandsConcatenated=e=>e.map((e=>`"${this.escapeDoubleQuoteAndBackslash(e.brand)}";v="${e.version}"`)).join(", ");doubleQuoteEscape=e=>e.replace(/"/g,'\\"');backslashEscape=e=>e.replace(/\\/,"\\\\");escapeDoubleQuoteAndBackslash=e=>("string"==typeof e&&e&&(e=this.backslashEscape(e),e=this.doubleQuoteEscape(e)),e);isValidArray=e=>void 0!==e&&Array.isArray(e);getBrowserList=(e,t)=>this.isValidArray(e)?this.getBrandsConcatenated(e):this.isValidArray(t)?this.getBrandsConcatenated(t):void 0;getHintsValues=()=>["brands","mobile","platform","architecture","bitness","fullVersionList","model","platformVersion","wow64"];getPropertyQuoted(e){return void 0!==e?`"${this.escapeDoubleQuoteAndBackslash(e)}"`:e}}function clientHintHeaders(){return clhder=new ClsMediaInspectorUtil,new Promise((e=>{const t=navigator&&navigator.userAgentData;t?t.getHighEntropyValues(clhder.getHintsValues()).then((t=>{const n={"User-Agent":navigator.userAgent,"Sec-CH-UA":clhder.getBrowserList(t.brands),"Sec-CH-UA-Arch":clhder.getPropertyQuoted(t.architecture),"Sec-CH-UA-Mobile":"?"+(t.mobile?"1":"0"),"Sec-CH-UA-Model":clhder.getPropertyQuoted(t.model),"Sec-CH-UA-Platform":clhder.getPropertyQuoted(t.platform),"Sec-CH-UA-Platform-Version":clhder.getPropertyQuoted(t.platformVersion),"Sec-CH-UA-Full-Version-List":clhder.getBrowserList(t.fullVersionList,t.brands),"Sec-CH-UA-Bitness":clhder.getPropertyQuoted(t.bitness),"Sec-CH-UA-Wow64":"?"+(t.wow64?"1":"0")};e(n)})):navigator?e({"User-Agent":navigator.userAgent}):e({})}))}function getResponseHeader(t){return new Promise((n=>{const i=[];i.push(t);window.location.origin;const a=e=>e,s=e=>e.ok?Promise.resolve(e):Promise.reject(e),r=e=>Promise.reject(e);Promise.all(i.map((e=>fetch(e,{method:"GET",redirect:"follow",mode:"cors"}).then(a).then(s).catch(r)))).then((e=>{n(e)})).catch((t=>{var i;i=void 0===t.ok?t.toString():"Resource not found";var a=[],s=[],r={"content-type":"null/null",ok:!1,status:"404",statusText:"nok"};r.url=e,s.push(r),t.headers=s,t.errorMessage=i,a.push(t),n(a)}))}))}function loadPerfData(){return new Promise((e=>{performance.getEntriesByType("navigation")[0].duration?e("All loaded!"):setTimeout(t,10)}))}async function asyncProcess(){await loadPerfData();const e=new ClsMediaInspectorTool;let t=Array.from(window.document.querySelectorAll("*")),n=window.performance.getEntriesByType("resource").filter((e=>"IMG"==e.initiatorType.toUpperCase()||"VIDEO"==e.initiatorType.toUpperCase()||"SCRIPTx"==e.initiatorType.toUpperCase())),i="";for(var a=0;a<t.length;++a){var s=t[a];if("IMG"===s.nodeName.toUpperCase()||"VIDEO"===s.nodeName.toUpperCase()||"SCRIPTx"===s.nodeName.toUpperCase()){i="SCRIPT"===s.nodeName.toUpperCase()?s.src:s.currentSrc;let t=!1;for(var r=new ClsMediaSource,o=0;o<n.length;o++)i!==n[o].name||t||(t=!0,r.MediaDoc=s,n[o].perfTiming=window.performance.timing,r.MediaPerf=n[o]);if(!t&&""!=i)try{t=!0;var d=i;if((await getResponseHeader(d))[0].ok){let e=window.performance.getEntriesByType("resource").filter((e=>e.name==d));r.MediaDoc=s,e.length>0&&(e[0].perfTiming=window.performance.timing,r.MediaPerf=e[0],t=!0)}}catch(e){}if(t){const t=await getResponseHeader(i);var l={},c={},h="",g="",p="",m="";if(t[0].ok){try{m=null==t[0].headers.get("etag")?"":t[0].headers.get("etag")}catch(e){m=""}for(var u of t[0].headers.entries())l[u[0]]=u[1]}else for(var b of t[0].headers.entries())l[b[0]]=b[1],"x-cld-error"===b[0]?(h=b[0]+": "+b[1],!0):(h=t[0].errorMessage,l["content-type"]="*/html");try{var f=new URL(i);g=f.hostname,p=f.protocol}catch(e){g="undefined"}l.protocol=p,l.hostname=g,l["error-message"]=h,l.dpr=window.devicePixelRatio.toFixed(0),l.etag=m,r.MediaRespHdr=l;var v=await clientHintHeaders();for(const[e,t]of Object.entries(v))c[`${e}`]=`${t}`;r.MediaReqHdr=c,e.addMediaSrc(r)}}}e.show()}function appMain(){asyncProcess()}appMain();